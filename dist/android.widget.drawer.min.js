this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";const e=android.base.Resource,{NODE_RESOURCE:t}=squared.base.lib.constant,{CONTAINER_NODE:a,SUPPORT_TAGNAME:i,SUPPORT_TAGNAME_X:n}=android.lib.constant,{cloneObject:r,iterateArray:o}=squared.lib.util,{createThemeAttribute:s,createViewAttribute:d,removeFileExtension:u}=android.lib.util,{assignEmptyValue:l}=squared.base.lib.util;class Drawer extends squared.base.ExtensionUI{constructor(e,t,a){super(e,t,a),this.documentBase=!0,this.require({name:"android.external",leading:!0}),this.require({name:"android.widget.menu"}),this.require({name:"android.widget.coordinator"})}beforeInsertNode(e,t){if(this.included(e)){const a=this.application;return o(e.children,(e=>{if("NAV"===e.tagName){const t=a.getDatasetName("use",e);Drawer.includes(t,"android.external")||a.setDatasetName("use",e,(t?t+", ":"")+"android.external")}})),a.addRootElement(t,e),!0}return!1}processNode(t,a){const r=d(this.options.self),o=t.localSettings.resourceId;if(Drawer.findNestedElement(t,"android.widget.menu"))l(r,"android","fitsSystemWindows","true"),this.setStyleTheme(o,t.api);else{const e=d(this.options.navigationView);l(e,"android","layout_gravity",t.localizeString("left"));const a=t.item(-1);a.mergeGravity("layout_gravity",e.android.layout_gravity),a.setLayoutHeight("match_parent"),a.positioned=!0}t.documentRoot=!0,t.renderExclude=!1;const s=t.api<29?i.DRAWER:n.DRAWER;return t.setControlType(s,14),t.exclude({resource:4}),t.apply(e.formatOptions(o,r,this.application.extensionManager.valueAsBoolean("android.resource.strings","numberAsResource"))),t.render(a),t.setLayoutWidth("match_parent"),t.setLayoutHeight("match_parent"),{output:{type:1,node:t,controlName:s},complete:!0,include:!0,remove:!0}}afterParseDocument(t){var a,r;for(const o of this.subscribers)if(o.sessionId===t){const t=o.localSettings.systemName,s=d(this.options.navigationView),c=null===(a=Drawer.findNestedElement(o,"android.widget.menu"))||void 0===a?void 0:a.dataset["filename"+t],m=null===(r=Drawer.findNestedElement(o,"android.external"))||void 0===r?void 0:r.dataset["filename"+t],h=s.app||(s.app={});if(c&&l(h,"menu",`@menu/${u(c)}`),m&&l(h,"headerLayout",`@layout/${u(m)}`),c||m){const t=this.controller;l(s,"android","id",`@+id/${o.controlId}_navigation`),l(s,"android","fitsSystemWindows","true"),l(s,"android","layout_gravity",o.localizeString("left")),t.addAfterInsideTemplate(o,t.renderNodeStatic(o.sessionId,{controlName:o.api<29?i.NAVIGATION_VIEW:n.NAVIGATION_VIEW,width:"wrap_content",height:"match_parent"},e.formatOptions(o.localSettings.resourceId,s,this.application.extensionManager.valueAsBoolean("android.resource.strings","numberAsResource"))))}}}postOptimize(e){for(const t of e.ascend())t.hasHeight||t.setLayoutHeight("match_parent")}setStyleTheme(t,a){const{manifestThemeName:i,manifestParentThemeName:n}=this.application.userSettings,o=s(this.options.resource);if(l(o,"name",i),l(o,"parent",n),l(o.items,"android:windowTranslucentStatus","true"),e.addTheme(t,o),a>=21){const a=s(r(o)),i={};l(a.output||(a.output={}),"pathname","res/values-v21"),l(i,"android:windowDrawsSystemBarBackgrounds","true"),l(i,"android:statusBarColor","@android:color/transparent"),a.items=i,e.addTheme(t,a)}}}const c=new Drawer("android.widget.drawer",2);return squared&&squared.add(c),c}();
